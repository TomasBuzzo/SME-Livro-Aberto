{% load static %}{% load humanize %}{% load l10n %}<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, user-scalable=no">
  <title>Mosaico • Transparência Orçamentária</title>
  <link href="https://fonts.googleapis.com/css?family=Nunito:300,400,700,800,900|Ubuntu:400,700" rel="stylesheet">
  <link rel="stylesheet" href="{% static 'css/typography.css' %}">
  <link rel="stylesheet" href="{% static 'css/palette.css' %}">
  <link rel="stylesheet" href="{% static 'css/grid.css' %}">
  <link rel="stylesheet" href="{% static 'css/form.css' %}">
  <link rel="stylesheet" href="{% static 'css/charts.css' %}">
  <script src="https://d3js.org/d3.v5.min.js"></script>
  <script src="{% static 'js/treemap.js' %}"></script>
  <script src="{% static 'js/timeseries.js' %}"></script>
</head>
<body>
  <header>
    <div class="wrapper">
      <h1>Mosaico Orçamentário</h1>
      <p>Orçamento da Educação ao seu alcance</p>
      <nav>
        <a class="methodology" href="">
          <svg viewBox="0 0 320 320" height="32" class="icon">
            <use xlink:href="{% static 'img/icon-info.svg' %}#icon-info"></use>
          </svg>
          Metodologia
        </a>
      </nav>
    </div>
  </header>
  <section id="mosaico">
    <div class="wrapper">
      <form action="" method="get" class="query">
      <fieldset>
        <legend>
          Visualizar
        </legend>
        <div class="form-item switch">
          <input class="radio" type="radio" name="break" checked id="simple">
          <label for="simple">Visão simplificada</label>
          <input class="radio" type="radio" name="break" id="pro">
          <label for="pro">Visão técnica</label>
        </div>
        <div class="form-item">
          <input class="radio" type="radio" name="universe" value="">
          <label>Educação</label>
          <input class="radio" type="radio" name="universe" value="">
          <label>Mínimo constitucional</label>
        </div>
        <select name="year">
            {% for year, values in timeseries.items %}
                <option value="{{year}}">{{year}}</option>
            {% endfor %}
        </select>
      </fieldset>
      </form>
      {% include '_breadcrumb.html' with breadcrumb=breadcrumb anchor='mosaico' %}
      </nav>
      <ol class="treemap">
          {% for execucao in execucoes %}
          <li data-execution="{{ execucao.percentual_empenhado|unlocalize}}" data-value="{{ execucao.orcado_total|unlocalize }}">
                  <a href="{{ execucao.url}}#mosaico">
                  <div class="value">R$ {{ execucao.orcado_total|intword }} </div>
                  <div class="name">{{ execucao.nome }}</div>
                  <div class="execution">{% widthratio execucao.percentual_empenhado 1 100 %}%</div>
                  </a>
              </li>
          {% endfor %}
      </ol>
      <footer>
          <div class="legend">
              {# TODO: think on a progressive strategy of loading legend #}
              <img src="{% static 'img/escala_cor_mosaico.svg' %}" width="400" alt="">
          </div>
          <div class="actions">
              <a class="btn" href="">Dados do gráfico</a>
              <a class="btn" href="">Dados da tela</a>
          </div>
      </footer>
    </div>
  </section>
  <section id="budget-over-time">
    <div class="wrapper">
      <h2>Orçamento x <em>Tempo</em></h2>
      <form action="" method="get" class="query">
      <fieldset>
        <legend>
          Visualizar
        </legend>
        <div class="form-item switch">
          <input type="checkbox" name="break" checked id="use-deflator">
          <label for="use-deflator">Valores corrigidos</label>
          <label for="use-deflator">Valores correntes</label>
        </div>
      </fieldset>
      </form>
      {% include '_breadcrumb.html' with breadcrumb=breadcrumb anchor='budget-over-time' %}
      <div class="timeseries">
          <table>
              <thead>
                  <tr>
                      <th>Ano</th>
                      <th>Valor atualizado</th>
                      <th>Valor pago</th>
                  </tr>
              </thead>
              <tbody>
		  {% for year, values in timeseries.items %}
                  <tr>
			  <th data-year="{{ year }}">{{ year }}</th>
			  <td data-updated="{{ values.orcado|unlocalize }}">R${{ values.orcado }}</td>
			  <td data-paid="{{ values.empenhado|unlocalize }}">R${{ values.empenhado }}</td>
                  </tr>
		  {% endfor %}
              </tbody>
          </table>
      </div>
    </div>
  </section>
  <section id="data-table">
    <div class="wrapper">
      <h2><em>Tabela</em> de Dados</h2>
      {% include '_breadcrumb.html' with breadcrumb=breadcrumb anchor='data-table' %}
      <table>
          <thead>
              <tr>
                  <th>Área</th>
                  <th>Orçamento</th>
                  <th>Empenhado</th>
                  <th>Execução</th>
              </tr>
          </thead>
          <tbody>
          {% for execucao in execucoes %}
              <tr>
                  <th>{{ execucao.nome }}</th>
                  <td>R$ {{ execucao.orcado_total|intcomma }} </td>
                  <td>R$ {{ execucao.empenhado_total|intcomma}} </td>
                  <td>{% widthratio execucao.percentual_empenhado 1 100 %}%</td>
              </tr>
          {% endfor %}
          </tbody>
      </table>
    </div>
  </section>
  <section id="social">
    <div class="wrapper">
      <h2>
        Compartilhe!
      </h2>
      <nav>
        <ul>
          <li>
            <a href="">
              <svg class="icon">
                <use xlink:href="{% static 'img/icon-facebook.svg' %}#icon-facebook"></use>
              </svg>
            </a>
          </li>
          <li>
            <a href="">
              <svg class="icon">
                <use xlink:href="{% static 'img/icon-twitter.svg' %}#icon-twitter"></use>
              </svg>
            </a>
          </li>
          <li>
            <a href="">
              <svg class="icon">
                <use xlink:href="{% static 'img/icon-linkedin.svg' %}#icon-linkedin"></use>
              </svg>
            </a>
          </li>
          <li>
            <a href="">
              <svg class="icon">
                <use xlink:href="{% static 'img/icon-whatsapp.svg' %}#icon-whatsapp"></use>
              </svg>
            </a>
          </li>
        </ul>
      </nav>
    </div>
  </section>
  <footer>
    <div class="wrapper">
      <nav>
        <ul>
          <li>
            <a href="">
              <img src="{% static 'img/logo-unesco.svg' %}" alt="Unesco">
            </a>
          </li>
          <li>
            <a href="">
              <img src="{% static 'img/logo-sme.svg' %}" alt="Prefeitura de São Paulo - Educação">
            </a>
          </li>
        </ul>
      </nav>
    </div>
  </footer>
</body>
</html>
